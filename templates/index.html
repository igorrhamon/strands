<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Strads Governance Dashboard</title><script src="https://cdn.tailwindcss.com"></script><style>.focus-ring:focus{outline:2px solid #3b82f6;outline-offset:2px;}</style></head>
<body class="bg-slate-50 min-h-screen p-4 md:p-12 text-slate-900 font-sans"><main class="max-w-3xl mx-auto"><header class="mb-10"><h1 class="text-3xl font-extrabold flex items-center gap-2"><span>ðŸŽ¨</span> Strads Governance</h1><p class="text-slate-500 mt-1">Human-in-the-loop review</p></header>
{% if not decisions %}<div class="bg-white rounded-2xl p-16 text-center border-2 border-dashed border-slate-200 shadow-sm"><div class="text-5xl mb-4">âœ…</div><h2 class="text-xl font-bold">All clear!</h2><p class="text-slate-500">No pending decisions.</p></div>
{% else %}<div class="space-y-6" role="list">{% for d in decisions %}<article class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-md transition-all duration-300" role="listitem" id="d-{{ d.decision_id }}"><div class="p-6 md:p-8"><div class="flex items-start justify-between mb-4"><div><span class="text-[10px] font-bold uppercase px-2 py-1 rounded bg-slate-100 text-slate-600 mr-2">{{ d.service }}</span><span class="text-[10px] font-bold uppercase px-2 py-1 rounded {% if d.severity == 'CRITICAL' %}bg-rose-100 text-rose-700{% else %}bg-amber-100 text-amber-700{% endif %}">{{ d.severity }}</span></div><time class="text-[10px] text-slate-400">{{ d.created_at }}</time></div>
<h3 class="text-xl font-bold mb-4">{{ d.summary }}</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 text-sm"><div class="p-4 bg-slate-50 rounded-xl"><span class="block font-bold text-slate-400 uppercase text-[10px] mb-2">Hypothesis</span>{{ d.primary_hypothesis }}</div><div class="p-4 bg-slate-50 rounded-xl"><span class="block font-bold text-slate-400 uppercase text-[10px] mb-2">Risk</span>{{ d.risk_assessment }}</div></div>
<div class="flex flex-col sm:flex-row gap-3"><textarea id="f-{{ d.decision_id }}" placeholder="Optional feedback..." class="flex-1 text-sm border rounded-xl p-3 focus-ring bg-slate-50/50 outline-none" aria-label="Feedback"></textarea><div class="flex gap-2 w-full sm:w-auto">
<button onclick="rev('{{ d.decision_id }}',true)" class="flex-1 sm:flex-none bg-emerald-600 text-white font-bold px-8 py-3 rounded-xl hover:bg-emerald-700 focus-ring disabled:opacity-50" aria-label="Approve">Approve</button><button onclick="rev('{{ d.decision_id }}',false)" class="flex-1 sm:flex-none bg-rose-600 text-white font-bold px-8 py-3 rounded-xl hover:bg-rose-700 focus-ring disabled:opacity-50" aria-label="Reject">Reject</button></div></div></div></article>{% endfor %}</div>{% endif %}</main>
<script>async function rev(id, ok) { const c=document.getElementById(`d-${id}`), f=document.getElementById(`f-${id}`).value, bs=c.querySelectorAll('button'); bs.forEach(b=>b.disabled=true); try { const r=await fetch(`/decisions/${id}/review`, {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({decision_id:id,is_approved:ok,feedback:f,validated_by:'human_operator'})}); if(r.ok){c.classList.add('opacity-0','scale-95','-translate-y-4');setTimeout(()=>{c.remove();if(!document.querySelector('article'))location.reload()},400)}else{alert('Failed');bs.forEach(b=>b.disabled=false)}}catch{alert('Error');bs.forEach(b=>b.disabled=false)}}</script></body></html>
